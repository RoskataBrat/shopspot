<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="../Components/styles/ProductPage.css" />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
  />
  <title>Product Page</title>
</head>
<body>
  <!-- TOP BAR -->
  <div class="top">
    <div class="logo"><a href="../index.html"><img src="../images/logo.png" alt="Logo" /></a></div>
    <div class="searchBar">
      <input type="text" placeholder="–¢—ä—Ä—Å–µ–Ω–µ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏..." />
      <button class="searchButton"><i class="fa-solid fa-magnifying-glass"></i></button>
    </div>
    <div class="phones">
      <div class="phone"><i class="fas fa-phone"></i> +359 123 456 789</div>
      <div class="phone"><i class="fas fa-envelope"></i> info@example.com</div>
    </div>
  </div>

  <!-- HEADER MENU -->
  <div class="main-header">
    <div class="first-header" id="firstHeader">
      <div class="second-header">
        <div class="section-buttons">
          <div class="dropdown">
            <button class="header-button">–¢–µ—Ö–Ω–∏–∫–∞ <i class="fas fa-angle-down"></i></button>
            <div class="dropdown-content">
              <a href="#">–°–º–∞—Ä—Ç—Ñ–æ–Ω–∏</a>
              <a href="#">–õ–∞–ø—Ç–æ–ø–∏</a>
              <a href="#">–ö–æ–º–ø—é—Ç—Ä–∏</a>
            </div>
          </div>
          <div class="dropdown">
            <button class="header-button">–î—Ä–µ—Ö–∏ <i class="fas fa-angle-down"></i></button>
            <div class="dropdown-content">
              <a href="#">–¢–µ–Ω–∏—Å–∫–∏</a>
              <a href="#">–û–±—É–≤–∫–∏</a>
              <a href="#">–®–∞–ø–∫–∏</a>
            </div>
          </div>
          <div class="dropdown">
            <button class="header-button">–•—Ä–∞–Ω–∏—Ç–µ–ª–Ω–∏ —Å—Ç–æ–∫–∏ <i class="fas fa-angle-down"></i></button>
            <div class="dropdown-content">
              <a href="#">–ú–µ—Å–æ</a>
              <a href="#">–ü–ª–æ–¥–æ–≤–µ –∏ –∑–µ–ª–µ–Ω—á—É—Ü–∏</a>
              <a href="#">–•–ª—è–±</a>
              <a href="#">–ú–ª–µ—á–Ω–∏ –ø—Ä–æ–¥—É–∫—Ç–∏</a>
              <a href="#">–î–µ—Å–µ—Ä—Ç–∏</a>
              <a href="#">–ù–∞–ø–∏—Ç–∫–∏</a>
            </div>
          </div>
          <div class="dropdown">
            <button class="header-button">–ê–∫—Å–µ—Å–æ–∞—Ä–∏–∏ <i class="fas fa-angle-down"></i></button>
            <div class="dropdown-content">
              <a href="#">–ü–µ—Ä–∏—Ñ–µ—Ä–∏—è</a>
              <a href="#">–ö–æ–∑–º–µ—Ç–∏–∫–∞</a>
              <a href="#">–ú–æ–¥–∞</a>
            </div>
          </div>
          <button class="header-button">–ö–æ–Ω—Ç–∞–∫—Ç–∏</button>
        </div>
      </div>
    </div>
  </div>

  <!-- PRODUCT SECTION -->
  <section class="product-page" id="productPage">
    <!-- Content will be dynamically inserted here -->
  </section>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="container">
      <div class="row">
        <div class="footer-col">
          <h4>company</h4>
          <ul>
            <li><a href="#">about us</a></li>
            <li><a href="#">our services</a></li>
            <li><a href="#">privacy policy</a></li>
            <li><a href="#">affiliate program</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>get help</h4>
          <ul>
            <li><a href="#">FAQ</a></li>
            <li><a href="#">shipping</a></li>
            <li><a href="#">returns</a></li>
            <li><a href="#">order status</a></li>
            <li><a href="#">payment options</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>online shop</h4>
          <ul>
            <li><a href="#">watch</a></li>
            <li><a href="#">bag</a></li>
            <li><a href="#">shoes</a></li>
            <li><a href="#">dress</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>follow us</h4>
          <div class="social-links">
            <a href="#"><i class="fab fa-facebook-f"></i></a>
            <a href="#"><i class="fab fa-twitter"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-linkedin-in"></i></a>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <!-- JS to fetch product data -->
  <script>
  fetch('../../backend/data/products.json')
    .then(res => res.json())
    .then(products => {
      const urlParams = new URLSearchParams(window.location.search);
      const productId = parseInt(urlParams.get('id'));

      const product = products.find(p => p.id === productId);

      if (!product) {
        document.getElementById('productPage').innerHTML = '<p>–ü—Ä–æ–¥—É–∫—Ç—ä—Ç –Ω–µ –µ –Ω–∞–º–µ—Ä–µ–Ω.</p>';
        return;
      }

      const section = document.getElementById('productPage');
      section.innerHTML = `
        <div class="product-image">
          <img src="${product.image}" alt="${product.name}">
        </div>
        <div class="product-details">
          <h1>${product.name}</h1>
          <p>${product.description || "–û–ø–∏—Å–∞–Ω–∏–µ –Ω–µ –µ –Ω–∞–ª–∏—á–Ω–æ."}</p>
          <div class="features">
            <ul>
              ${(product.features || []).map(f => `<li>‚úîÔ∏è ${f}</li>`).join('')}
            </ul>
          </div>
          <div class="price">–¶–µ–Ω–∞: ${product.price} –ª–≤.</div>
          <a href="Components/Cart.html">
            <button class="buy-button" id="buyNowBtn">üõí –ö—É–ø–∏ —Å–µ–≥–∞</button>
          </a>
        </div>
      `;
      document.getElementById("buyNowBtn").addEventListener("click", () => {
        let cart = JSON.parse(localStorage.getItem("cart")) || [];

        // Check if the product is already in cart
        const existingProduct = cart.find(item => item.id === product.id);
        if (!existingProduct) {
          cart.push({
            id: product.id,
            name: product.name,
            image: product.image,
            price: product.price,
            description: product.description || "",
          });
        }

        localStorage.setItem("cart", JSON.stringify(cart));
        window.location.href = "Components/Cart.html";
      });

      
    })
    .catch(err => {
      document.getElementById('productPage').innerHTML = '<p>–ù–µ—É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∞.</p>';
      console.error('Error loading product data:', err);
    });
</script>
<script src="../Pages/logic/searchbar.js"></script>
</body>
</html>
